"use strict";var Deck=function(){function t(t){if("undefined"!=typeof I[t])return I[t];if("undefined"!=typeof E[t])return I[t]=t,t;for(var n,e=t[0].toUpperCase()+t.slice(1),o=["webkit","moz","Moz","ms","o"],i=0,u=o.length;u>i;i++)if(n=o[i]+e,"undefined"!=typeof E[n])return I[t]=n,n}function n(t,n,e){return e=e||0,D?"translate3d("+t+", "+n+", "+e+")":"translate("+t+", "+n+")"}function e(e,o){var i=t("transform"),u=t("transition");t("transitionDelay");e.poker=function(t,e,r){var s=250*t,c={x:110*(t-2.05),y:-125};setTimeout(function(){o.style.zIndex=e-1+t},s),setTimeout(function(){o.style[u]="all .25s cubic-bezier(0.645, 0.045, 0.355, 1.000)",o.style[i]=n(c.x+"%",c.y+"%")},s+25),setTimeout(function(){o.style[u]="",r(t)},s+250)}}function o(e,o){var i=t("transform"),u=t("transformOrigin"),r=t("transition"),s=t("transitionDelay");e.fan=function(t,e,c){var a=t/4,l=10*t,f=t/(e-1)*260-130;o.style[u]="50% 110%",setTimeout(function(){o.style[r]="all .3s cubic-bezier(0.645, 0.045, 0.355, 1.000)",o.style[s]=l/1e3+"s",o.style[i]=n(-a+"px",-a+"px"),o.style.zIndex=t,setTimeout(function(){o.style[s]="",o.style[i]=n(0,0)+"rotate("+f+"deg)"},300+l)},0),setTimeout(function(){c(t)},1e3+l)}}function i(e,o){var i=t("transform"),u=t("transition"),r=t("transitionDelay"),s=e.value,c=e.suit;e.bysuit=function(t){var a=e.i,l=10*a,f=15*-(6.75-s),d=105*-(1.5-c);setTimeout(function(){o.style[u]="all .5s cubic-bezier(0.645, 0.045, 0.355, 1.000)",o.style[r]=l/1e3+"s",o.style[i]=n(f+"%",d+"%"),o.style.zIndex=a,setTimeout(function(){o.style[u]="",t(a)},500+l)},0)}}function u(e,o){var i=t("transform"),u=t("transition");e.sort=function(t,r,s){var c=t/4,a=10*t;setTimeout(function(){o.style[u]="all .4s cubic-bezier(0.645, 0.045, 0.355, 1.000)",o.style[i]=n(-c+"px","-150%")},a),setTimeout(function(){o.style.zIndex=t},200+a),setTimeout(function(){o.style[i]=n(-c+"px",-c+"px"),setTimeout(function(){o.style[u]="",e.x=-c,e.y=-c,r(t)},500)},400+a)}}function r(t){var n=Math.round(Math.random())?-1:1;return n*t}function s(e,o){var i=t("transform"),u=t("transition"),s=t("transitionDelay");e.shuffle=function(t){var c=e.pos,a=c/4,l=r(40*Math.random()+30),f=2*c;o.style[u]="all .2s cubic-bezier(0.645, 0.045, 0.355, 1.000)",o.style[s]=f/1e3+"s",setTimeout(function(){o.style[i]=n(l+"%",-a+"px")},0),setTimeout(function(){o.style[s]="",o.style.zIndex=c},100+f),setTimeout(function(){o.style[i]=n(-a+"px",-a+"px"),setTimeout(function(){o.style[u]="",t(c)},200)},200+f)}}function c(e,o){var i=t("transform"),u=t("transition"),r=t("transitionDelay");e.intro=function(t,e){var s=10*t+250,c=t/4;o.style[i]=n(-c+"px","-250%"),o.style.opacity=0,o.style.zIndex=t,setTimeout(function(){o.style[u]="all 1s cubic-bezier(0.645, 0.045, 0.355, 1.000)",o.style[r]=s/1e3+"s",o.style[i]=n(-c+"px",-c+"px"),o.style.opacity=1,setTimeout(function(){o.style[u]="",e&&e(t)},1250+s)},500)}}function a(t){return document.createElement(t)}function l(r){function l(t){function e(t){var e={};"mousemove"===t.type?(e.x=t.clientX,e.y=t.clientY):(e.x=t.touches[0].clientX,e.y=t.touches[0].clientY),T.style[v]="",T.style[h]=n(e.x-i.left+"px",e.y-i.top+"px")}function o(t){"mouseup"===t.type?(y(window,"mousemove",e),y(window,"mouseup",o)):(y(window,"touchmove",e),y(window,"touchend",o))}var i=k.$root.getBoundingClientRect(),u={};t.preventDefault(),"mousedown"===t.type?(u.x=t.clientX,u.y=t.clientY,d(window,"mousemove",e),d(window,"mouseup",o)):(u.x=t.touches[0].clientX,u.y=t.touches[0].clientY,d(window,"touchmove",e),d(window,"touchend",o)),T.style[v]="all .2s cubic-bezier(0.215, 0.610, 0.355, 1.000)",T.style[h]=n(u.x-i.left+"px",u.y-i.top+"px"),T.style.zIndex=L++}function p(t){t.appendChild(T),k.$root=t}function m(){k.$root&&k.$root.removeChild(T),k.$root=null}var v=t("transition"),h=t("transform"),x=r%13+1,b=1===x?"A":11===x?"J":12===x?"Q":13===x?"K":x,g=r/13|0,w=f(g),z=(52-r)/4,T=a("div"),C=a("div"),E=a("div"),I=a("div"),q=!1,k={i:r,value:x,suit:g,pos:r,$el:T,mount:p,unmount:m};return T.classList.add("card",w,w+x),C.classList.add("topleft"),E.classList.add("bottomright"),I.classList.add("face"),C.textContent=4>g?b:"J\nO\nK\nE\nR",E.textContent=4>g?b:"J\nO\nK\nE\nR",T.style.zIndex=52-r,T.style[h]="translate(-"+z+"px, -"+z+"px)",T.appendChild(I),T.appendChild(C),T.appendChild(E),c(k,T),s(k,T),u(k,T),i(k,T),o(k,T),e(k,T),k.enableMoving=function(){q||(T.style.cursor="move",d(T,"mousedown",l),d(T,"touchstart",l))},k.disableMoving=function(){q&&(T.style.cursor="",y(T,"mousedown",l),y(T,"touchstart",l))},k}function f(t){return 0===t?"spades":1===t?"hearts":2===t?"clubs":3===t?"diamonds":"joker"}function d(t,n,e){t.addEventListener(n,e)}function y(t,n,e){t.removeEventListener(n,e)}function p(t){return"cubicInOut"===t?"cubic-bezier(0.645, 0.045, 0.355, 1.000)":void 0}function m(t){function n(n){var e=t.cards;e.forEach(function(t,o){t.intro(o,function(t){t===e.length-1&&n()})})}t.intro=t.queued(n)}function v(t){function n(n){var e=t.cards;e.forEach(function(t){t.bysuit(function(t){t===e.length-1&&n()})})}t.bysuit=t.queued(n)}function h(t){function n(n){var e=t.cards,o=e.length;e.slice(-5).reverse().forEach(function(t,e){t.poker(e,o,function(t){4===t&&n()})})}t.poker=t.queued(n)}function x(t){function n(n){var e=t.cards,o=e.length;e.forEach(function(t,i){t.fan(i,o,function(t){t===e.length-1&&n()})})}t.fan=t.queued(n)}function b(t){function n(n,e){var o=t.cards;o.sort(function(t,n){return e?t.i-n.i:n.i-t.i}),o.forEach(function(t,i){t.sort(i,function(t){t===o.length-1&&n()},e)})}t.sort=t.queued(n)}function g(t){for(var n,e,o=t.length-1;o;o--)n=Math.random()*o|0,e=t[o],t[o]=t[n],t[n]=e;return t}function w(t){function n(n){var e=t.cards;g(e),e.forEach(function(t,o){t.pos=o,t.shuffle(function(t){t===e.length-1&&n()})})}t.shuffle=t.queued(n)}function z(t){function n(t){return function(){var n=this,o=arguments;e(function(e){t.apply(n,i.concat.apply(e,o))})}}function e(t){t&&(u.push(t),1===u.length&&o())}function o(){u[0](function(t){if(t)throw t;u=u.slice(1),u.length&&o()})}var i=Array.prototype,u=[];return t.queue=e,t.queued=n,t}function T(t){function n(t,n,e){u[t]||(u[t]=[]),u[t].push({cb:n,ctx:e})}function e(t,n,e){u[t]||(u[t]=[]),u[t].push({cb:n,ctx:e,once:!0})}function o(t){var n=this,e=Array.prototype.slice(arguments,1),o=u[t]||[];o.filter(function(t){return t.cb.apply(n,e),!t.once})}function i(t,n){return t?n?void(u[t]=u[t].filter(function(t){return t.cb!==n})):void(u[t]=[]):void(u={})}t||(t={});var u={};return t.on=n,t.one=e,t.off=i,t.trigger=o,t}function C(t){function n(t){o=t,o.appendChild(u)}function e(){o.removeChild(u)}var o,i=new Array(t?55:52),u=a("div"),r=T({mount:n,unmount:e,cards:i,$el:u});z(r),w(r),b(r),x(r),h(r),v(r),m(r),u.classList.add("deck");for(var s,c=0,f=i.length;f>c;c++)s=i[c]=l(c),s.mount(u);return r}var E=document.createElement("p").style,I={},q=t("transform"),k=document.createElement("p");document.body.appendChild(k),k.style[q]="translate3d(1px,1px,1px)";var D=k.style[q];D=null!=D&&D.length&&"none"!==D,document.body.removeChild(k);var L=52;return C.Card=l,C.easing=p,C.prefix=t,C.translate=n,C}();